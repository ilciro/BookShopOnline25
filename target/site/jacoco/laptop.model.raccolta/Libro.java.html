<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="it"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Libro.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">BookShopOnline25 Maven Webapp</a> &gt; <a href="index.source.html" class="el_package">laptop.model.raccolta</a> &gt; <span class="el_source">Libro.java</span></div><h1>Libro.java</h1><pre class="source lang-java linenums">package laptop.model.raccolta;

import java.awt.Desktop;
import java.io.*;
import java.net.URISyntaxException;

import java.time.LocalDate;
import java.util.ResourceBundle;
import java.util.logging.Level;
import java.util.logging.Logger;


import com.itextpdf.text.*;
import com.itextpdf.text.pdf.*;


public class Libro implements Raccolta , Serializable  {
	@Serial
	private static final long serialVersionUID = 2L;

	private String titolo;
	private String codIsbn;
	private String editore;
	private String autore;
	private String lingua;
	private String categoria;
	private String descrizione;
	private LocalDate dataPubb;
	private String recensione;
	private int nrPagine;
	private int nrCopie; // numero copie vendute
	private int disponibilita;
	private float prezzo;
	private int id;
<span class="fc" id="L35">	private String[] infoGenerali = new String[7];</span>
<span class="fc" id="L36">	private String[] infoCostiDisp = new String[5];</span>
	private static final String DSTPATH=&quot;dstPath&quot;;

	private  File f;




<span class="fc" id="L44">	public Libro() {</span>

<span class="fc" id="L46">	}</span>


	public String getTitolo() {
<span class="fc" id="L50">		return this.titolo;</span>
	}

	public String getCodIsbn() {
<span class="fc" id="L54">		return this.codIsbn;</span>
	}

	public String getEditore() {
<span class="fc" id="L58">		return this.editore;</span>
	}

	public String getAutore() {
<span class="fc" id="L62">		return this.autore;</span>
	}

	public String getLingua() {
<span class="fc" id="L66">		return this.lingua;</span>
	}

	public String getCategoria() {
<span class="fc" id="L70">		return this.categoria;</span>
	}

	public LocalDate getDataPubb() {
<span class="fc" id="L74">		return this.dataPubb;</span>
	}

	public String getRecensione() {
<span class="fc" id="L78">		return this.recensione;</span>
	}

	public int getNrCopie() {
<span class="fc" id="L82">		return this.nrCopie;</span>
	}

	public String getDesc() {
<span class="fc" id="L86">		return this.descrizione;</span>
	}

	public int getDisponibilita() {
<span class="fc" id="L90">		return this.disponibilita;</span>
	}

	public float getPrezzo() {
<span class="fc" id="L94">		return this.prezzo;</span>
	}

	public void setTitolo(String titolo) {
<span class="fc" id="L98">		this.titolo = titolo;</span>
<span class="fc" id="L99">	}</span>

	public void setCodIsbn(String codIsbn) {
<span class="fc" id="L102">		this.codIsbn = codIsbn;</span>
<span class="fc" id="L103">	}</span>

	public void setEditore(String editore) {
<span class="fc" id="L106">		this.editore = editore;</span>
<span class="fc" id="L107">	}</span>

	public void setAutore(String autore) {
<span class="fc" id="L110">		this.autore = autore;</span>
<span class="fc" id="L111">	}</span>

	public void setLingua(String lingua) {
<span class="fc" id="L114">		this.lingua = lingua;</span>
<span class="fc" id="L115">	}</span>

	public void setDataPubb(LocalDate dataPubb) {
<span class="fc" id="L118">		this.dataPubb = dataPubb;</span>
<span class="fc" id="L119">	}</span>

	public void setRecensione(String recensione) {
<span class="fc" id="L122">		this.recensione = recensione;</span>
<span class="fc" id="L123">	}</span>

	public void setNrCopie(int nrCopie) {
<span class="fc" id="L126">		this.nrCopie = nrCopie;</span>
<span class="fc" id="L127">	}</span>

	public void setDesc(String desc) {
<span class="fc" id="L130">		this.descrizione = desc;</span>
<span class="fc" id="L131">	}</span>

	public void setDisponibilita(int disponibilita) {
<span class="fc" id="L134">		this.disponibilita = disponibilita;</span>
<span class="fc" id="L135">	}</span>

	public void setPrezzo(float prezzo) {
<span class="fc" id="L138">		this.prezzo = prezzo;</span>
<span class="fc" id="L139">	}</span>


<span class="fc" id="L142">	private final transient ResourceBundle rbTitoli=ResourceBundle.getBundle(&quot;configurations/titles&quot;);</span>

	public int getId() {
<span class="fc" id="L145">		return id;</span>
	}

	public void setId(int id) {
<span class="fc" id="L149">		this.id = id;</span>
<span class="fc" id="L150">	}</span>

	public void setCategoria(String categoria) {
<span class="pc bpc" id="L153" title="21 of 30 branches missed.">		switch (categoria) {</span>
			case &quot;ADOLESCENTI_RAGAZZI&quot;:
<span class="nc" id="L155">				this.categoria = CategorieLibro.ADOLESCENTI_RAGAZZI.toString();</span>
<span class="nc" id="L156">				break;</span>
			case &quot;ARTE&quot;:
<span class="nc" id="L158">				this.categoria = CategorieLibro.ARTE.toString();</span>
<span class="nc" id="L159">				break;</span>
			case &quot;CINEMA_FOTOGRAFIA&quot;:
<span class="nc" id="L161">				this.categoria = CategorieLibro.CINEMA_FOTOGRAFIA.toString();</span>
<span class="nc" id="L162">				break;</span>
			case &quot;BIOGRAFIE&quot;:
<span class="nc" id="L164">				this.categoria = CategorieLibro.BIOGRAFIE.toString();</span>
<span class="nc" id="L165">				break;</span>
			case &quot;DIARI_MEMORIE&quot;:
<span class="nc" id="L167">				this.categoria = CategorieLibro.DIARI_MEMORIE.toString();</span>
<span class="nc" id="L168">				break;</span>
			case &quot;CALENDARI_AGENDE&quot;:
<span class="nc" id="L170">				this.categoria = CategorieLibro.CALENDARI_AGENDE.toString();</span>
<span class="nc" id="L171">				break;</span>
			case &quot;DIRITTO&quot;:
<span class="nc" id="L173">				this.categoria = CategorieLibro.DIRITTO.toString();</span>
<span class="nc" id="L174">				break;</span>
			case &quot;DIZINARI_OPERE&quot;:
<span class="nc" id="L176">				this.categoria = CategorieLibro.DIZINARI_OPERE.toString();</span>
<span class="nc" id="L177">				break;</span>
			case &quot;ECONOMIA&quot;:
<span class="fc" id="L179">				this.categoria = CategorieLibro.ECONOMIA.toString();</span>
<span class="fc" id="L180">				break;</span>
			case &quot;FAMIGLIA&quot;:
<span class="nc" id="L182">				this.categoria = CategorieLibro.FAMIGLIA.toString();</span>
<span class="nc" id="L183">				break;</span>
			case &quot;FANTASCIENZA_FANTASY&quot;:
<span class="fc" id="L185">				this.categoria = CategorieLibro.FANTASCIENZA_FANTASY.toString();</span>
<span class="fc" id="L186">				break;</span>
			case &quot;FUMETTI_MANGA&quot;:
<span class="fc" id="L188">				this.categoria = CategorieLibro.FUMETTI_MANGA.toString();</span>
<span class="fc" id="L189">				break;</span>
			case &quot;GIALLI_THRILLER&quot;:
<span class="nc" id="L191">				this.categoria = CategorieLibro.GIALLI_THRILLER.toString();</span>
<span class="nc" id="L192">				break;</span>
			case &quot;COMPUTER_GIOCHI&quot;:
<span class="fc" id="L194">				this.categoria = CategorieLibro.COMPUTER_GIOCHI.toString();</span>
<span class="fc" id="L195">				break;</span>
			case &quot;HUMOR&quot;:
<span class="nc" id="L197">				this.categoria = CategorieLibro.HUMOR.toString();</span>
<span class="nc" id="L198">				break;</span>
			case &quot;INFORMATICA&quot;:
<span class="fc" id="L200">				this.categoria = CategorieLibro.INFORMATICA.toString();</span>
<span class="fc" id="L201">				break;</span>
			case &quot;WEB_DIGITAL_MEDIA&quot;:
<span class="nc" id="L203">				this.categoria = CategorieLibro.WEB_DIGITAL_MEDIA.toString();</span>
<span class="nc" id="L204">				break;</span>
			case &quot;LETTERATURA_NARRATIVA&quot;:
<span class="fc" id="L206">				this.categoria = CategorieLibro.LETTERATURA_NARRATIVA.toString();</span>
<span class="fc" id="L207">				break;</span>
			case &quot;LIBRI_BAMBINI&quot;:
<span class="nc" id="L209">				this.categoria = CategorieLibro.LIBRI_BAMBINI.toString();</span>
<span class="nc" id="L210">				break;</span>
			case &quot;LIBRI_SCOLASTICI&quot;:
<span class="nc" id="L212">				this.categoria = CategorieLibro.LIBRI_SCOLASTICI.toString();</span>
<span class="nc" id="L213">				break;</span>
			case &quot;LIBRI_UNIVERSITARI&quot;:
<span class="fc" id="L215">				this.categoria = CategorieLibro.LIBRI_UNIVERSITARI.toString();</span>
<span class="fc" id="L216">				break;</span>
			case &quot;RICETTARI_GENERALI&quot;:
<span class="nc" id="L218">				this.categoria = CategorieLibro.RICETTARI_GENERALI.toString();</span>
<span class="nc" id="L219">				break;</span>
			case &quot;LINGUISTICA_SCRITTURA&quot;:
<span class="fc" id="L221">				this.categoria = CategorieLibro.LINGUISTICA_SCRITTURA.toString();</span>
<span class="fc" id="L222">				break;</span>
			case &quot;POLITICA&quot;:
<span class="nc" id="L224">				this.categoria = CategorieLibro.POLITICA.toString();</span>
<span class="nc" id="L225">				break;</span>
			case &quot;RELIGIONE&quot;:
<span class="nc" id="L227">				this.categoria = CategorieLibro.RELIGIONE.toString();</span>
<span class="nc" id="L228">				break;</span>
			case &quot;ROMANZI_ROSA&quot;:
<span class="nc" id="L230">				this.categoria = CategorieLibro.ROMANZI_ROSA.toString();</span>
<span class="nc" id="L231">				break;</span>
			case &quot;SCIENZE&quot;:
<span class="nc" id="L233">				this.categoria = CategorieLibro.SCIENZE.toString();</span>
<span class="nc" id="L234">				break;</span>
			case &quot;TECNOLOGIA_MEDICINA&quot;:
<span class="nc" id="L236">				this.categoria = CategorieLibro.TECNOLOGIA_MEDICINA.toString();</span>
<span class="nc" id="L237">				break;</span>
			case &quot;ALTRO&quot;:
<span class="fc" id="L239">				this.categoria = CategorieLibro.ALTRO.toString();</span>
<span class="fc" id="L240">				break;</span>

			default:
<span class="nc" id="L243">				this.categoria = null;</span>
				break;
		}
<span class="fc" id="L246">	}</span>

	private void createPDF(String name)
	{
		//create a pdf with a paragraph
<span class="fc" id="L251">		Document document=new Document();</span>
		try{
<span class="fc" id="L253">			PdfWriter writer=PdfWriter.getInstance(document,new FileOutputStream(rbTitoli.getString(DSTPATH)+name));</span>
<span class="fc" id="L254">			document.open();</span>
<span class="fc" id="L255">			document.addTitle(&quot;Libro &quot;);</span>
<span class="fc" id="L256">			document.add(new Paragraph(&quot;&quot;&quot;</span>
                    libro/book not avalaible.Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                    Curabitur tempus tincidunt justo eget eleifend.
                    Maecenas nisl nulla, lobortis quis semper quis, scelerisque nec purus.
                    Mauris laoreet ac tellus molestie varius. Maecenas scelerisque, nibh ac pellentesque luctus, quam nibh congue tortor, vitae placerat dui lorem eget erat.
                    Proin non porta odio, ac porta nisl. Donec vitae commodo sem.
                    Fusce sit amet urna nec quam mattis tristique.
                    Nam non neque a nunc rhoncus ullamcorper eu in ex.
                    Proin et orci lacus. Cras rutrum lorem erat, nec ultrices urna efficitur sed.
                    Praesent auctor non lorem at bibendum.
                    Proin tincidunt mauris a velit pulvinar posuere.
                    Suspendisse posuere ex sed enim sollicitudin, sit amet ullamcorper nunc mollis.
                    Quisque sagittis aliquet ipsum vitae facilisis.
                    Etiam id ligula sed sem viverra cursus.
                    Aenean suscipit molestie posuere.
                    Duis id ante ut nibh suscipit gravida.
                    Cras egestas risus ac tellus varius, et rhoncus enim porttitor.
                    Nam malesuada in massa eu venenatis.&quot;&quot;&quot;));
<span class="fc" id="L274">			document.close();</span>
<span class="fc" id="L275">			writer.close();</span>

<span class="fc" id="L277">			readPdf(name);</span>


<span class="nc" id="L280">		}catch (DocumentException | IOException e)</span>
		{
<span class="nc" id="L282">			Logger.getLogger(&quot;create pdf&quot;).log(Level.SEVERE,&quot;pdf not created:{0} &quot;, name);</span>
<span class="fc" id="L283">		}</span>
<span class="fc" id="L284">    }</span>

	private void readPdf(String name) throws IOException, DocumentException {

<span class="fc" id="L288">		Document document = new Document();</span>

<span class="fc" id="L290">        PdfReader reader = new PdfReader(rbTitoli.getString(&quot;srcPath&quot;) +name);</span>
<span class="fc" id="L291">		PdfCopy copy=new PdfCopy(document,new FileOutputStream(rbTitoli.getString(DSTPATH)+name));</span>
<span class="fc" id="L292">		document.open();</span>

<span class="fc" id="L294">		int pages = reader.getNumberOfPages();</span>
<span class="fc bfc" id="L295" title="All 2 branches covered.">		for (int i = 1; i &lt;= pages; i++) {</span>
<span class="fc" id="L296">			copy.addPage(copy.getImportedPage(reader,i));</span>

		}


<span class="fc" id="L301">		reader.close();</span>
<span class="fc" id="L302">		document.close();</span>



<span class="fc" id="L306">	}</span>
	@Override
	public void scarica(int i) throws DocumentException, IOException {

		//here is copy of file

<span class="pc bpc" id="L312" title="12 of 13 branches missed.">			switch (i) {</span>
<span class="nc" id="L313">				case 1 -&gt;createPDF(rbTitoli.getString(&quot;titolo1&quot;));</span>
<span class="nc" id="L314">				case 2 -&gt; createPDF(rbTitoli.getString(&quot;titolo2&quot;));</span>
<span class="nc" id="L315">				case 3-&gt; createPDF(rbTitoli.getString(&quot;titolo3&quot;));</span>
<span class="nc" id="L316">				case 4-&gt; createPDF(rbTitoli.getString(&quot;titolo4&quot;));</span>
<span class="nc" id="L317">				case 5-&gt;createPDF(rbTitoli.getString(&quot;titolo5&quot;));</span>
<span class="fc" id="L318">				case 6-&gt;createPDF(rbTitoli.getString(&quot;titolo6&quot;));</span>
<span class="nc" id="L319">				case 7-&gt; createPDF(rbTitoli.getString(&quot;titolo7&quot;));</span>
<span class="nc" id="L320">				case 8-&gt;createPDF(rbTitoli.getString(&quot;titolo8&quot;));</span>
<span class="nc" id="L321">				case 9-&gt; createPDF(rbTitoli.getString(&quot;titolo9&quot;));</span>
<span class="nc" id="L322">				case 10-&gt;createPDF(rbTitoli.getString(&quot;titolo10&quot;));</span>
<span class="nc" id="L323">				case 11-&gt;createPDF(rbTitoli.getString(&quot;titolo11&quot;));</span>
<span class="nc" id="L324">				case 12-&gt;createPDF(rbTitoli.getString(&quot;titolo12&quot;));</span>

<span class="nc" id="L326">				default -&gt; 	Logger.getLogger(&quot;Test scarica&quot;).log(Level.SEVERE, &quot;download error&quot;);</span>




			}

<span class="fc" id="L333">}</span>

	@Override
	public void leggi(int i) throws IOException, DocumentException, URISyntaxException {

<span class="pc bpc" id="L338" title="12 of 13 branches missed.">		switch (i) {</span>
<span class="nc" id="L339">			case 1 -&gt; this.f=new File(rbTitoli.getString(DSTPATH) + rbTitoli.getString(&quot;titolo1&quot;));</span>
<span class="nc" id="L340">			case 2-&gt;this.f=new File(rbTitoli.getString(DSTPATH) + rbTitoli.getString(&quot;titolo2&quot;));</span>
<span class="nc" id="L341">			case 3-&gt;this.f=new File(rbTitoli.getString(DSTPATH) + rbTitoli.getString(&quot;titolo3&quot;));</span>
<span class="nc" id="L342">			case 4-&gt;this.f=new File(rbTitoli.getString(DSTPATH) + rbTitoli.getString(&quot;titolo4&quot;));</span>
<span class="nc" id="L343">			case 5-&gt;this.f=new File(rbTitoli.getString(DSTPATH) + rbTitoli.getString(&quot;titolo5&quot;));</span>
<span class="fc" id="L344">			case 6-&gt;this.f=new File(rbTitoli.getString(DSTPATH) + rbTitoli.getString(&quot;titolo6&quot;));</span>
<span class="nc" id="L345">			case 7-&gt;this.f=new File(rbTitoli.getString(DSTPATH) + rbTitoli.getString(&quot;titolo7&quot;));</span>
<span class="nc" id="L346">			case 8-&gt;this.f=new File(rbTitoli.getString(DSTPATH) + rbTitoli.getString(&quot;titolo8&quot;));</span>
<span class="nc" id="L347">			case 9-&gt;this.f=new File(rbTitoli.getString(DSTPATH) + rbTitoli.getString(&quot;titolo9&quot;));</span>
<span class="nc" id="L348">			case 10-&gt;this.f=new File(rbTitoli.getString(DSTPATH) + rbTitoli.getString(&quot;titolo10&quot;));</span>
<span class="nc" id="L349">			case 11-&gt;this.f=new File(rbTitoli.getString(DSTPATH) + rbTitoli.getString(&quot;titolo11&quot;));</span>

<span class="nc" id="L351">			case 12-&gt;this.f=new File(rbTitoli.getString(DSTPATH) + rbTitoli.getString(&quot;titolo12&quot;));</span>

<span class="nc" id="L353">			default -&gt; 	Logger.getLogger(&quot;Test leggi&quot;).log(Level.SEVERE, &quot;read error&quot;);</span>
		}
<span class="pc bpc" id="L355" title="1 of 2 branches missed.">		if (Desktop.isDesktopSupported()) {</span>
<span class="fc" id="L356">			new Thread(() -&gt; {</span>
				try {
<span class="fc" id="L358">					Desktop.getDesktop().open(f);</span>

<span class="nc" id="L360">				} catch (IOException e) {</span>
<span class="pc" id="L361">					Logger.getLogger(&quot;open file&quot;).log(Level.SEVERE, &quot;open error&quot;);				}</span>
<span class="fc" id="L362">			}).start();</span>


		}
<span class="fc" id="L366">	}</span>

	/*
	 * provo a levare i codeSmells &gt; 7 paramentri
	 */
<span class="fc" id="L371">	public Libro(String[] info, LocalDate dataPubb,  String recensione, String descrizione,String [] prezzi) {</span>
<span class="fc" id="L372">		this.infoGenerali=info;</span>
<span class="fc" id="L373">		this.infoCostiDisp=prezzi;</span>
<span class="fc" id="L374">		this.descrizione=descrizione;</span>
<span class="fc" id="L375">		this.recensione=recensione;</span>
<span class="fc" id="L376">		this.dataPubb = dataPubb;</span>

<span class="fc" id="L378">		this.titolo=info[0];</span>
<span class="fc" id="L379">		this.codIsbn=info[1];</span>
<span class="fc" id="L380">		this.editore=info[2];</span>
<span class="fc" id="L381">		this.autore=info[3];</span>
<span class="fc" id="L382">		this.lingua=info[4];</span>
<span class="fc" id="L383">		this.categoria=info[5];</span>





<span class="fc" id="L389">		this.nrPagine=Integer.parseInt(prezzi[0]);</span>

<span class="fc" id="L391">		this.nrCopie=Integer.parseInt(prezzi[1]);</span>
<span class="fc" id="L392">		this.disponibilita=Integer.parseInt(prezzi[2]);</span>
<span class="fc" id="L393">		this.prezzo=Float.parseFloat(prezzi[3]);</span>
<span class="fc" id="L394">		this.id= Integer.parseInt(prezzi[4]);</span>



<span class="fc" id="L398">	}</span>

	public String[] getInfoGenerali() {
<span class="fc" id="L401">		return infoGenerali;</span>
	}

	public void setInfoGenerali(String[] infoGenerali) {
<span class="fc" id="L405">		this.infoGenerali = infoGenerali;</span>
<span class="fc" id="L406">	}</span>

	public String[] getInfoCostiDisp() {
<span class="fc" id="L409">		return infoCostiDisp;</span>
	}

	public void setInfoCostiDisp(String[] infoCostiDisp) {
<span class="fc" id="L413">		this.infoCostiDisp = infoCostiDisp;</span>
<span class="fc" id="L414">	}</span>


	public int getNrPagine() {
<span class="fc" id="L418">		return nrPagine;</span>
	}

	public void setNrPagine(int nrPagine) {
<span class="fc" id="L422">		this.nrPagine = nrPagine;</span>
<span class="fc" id="L423">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>